(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[959],{3299:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),l=s(6766),r=s(6088),n=s(2115);function o(e){let{onPlaceSelected:t}=e,s=(0,n.useRef)(null),[l,r]=(0,n.useState)(!1),[o,c]=(0,n.useState)(""),[i,d]=(0,n.useState)(""),[m,u]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),[x,g]=(0,n.useState)("");return(0,n.useEffect)(()=>{(()=>{if(document.getElementById("google-maps"))return r(!0);let e=document.createElement("script");e.id="google-maps",e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBDGiOkN66dsD9vfXhO_GEg6JPpPVd5mDs&libraries=places",e.async=!0,e.onload=()=>r(!0),document.body.appendChild(e)})()},[]),(0,n.useEffect)(()=>{if(!l||!window.google||!s.current)return;let e=new window.google.maps.places.Autocomplete(s.current,{types:["geocode"],componentRestrictions:{country:"in"}});e.addListener("place_changed",()=>{var s,a,l,r;let n=e.getPlace();if(!n.address_components)return;let o=n.address_components,i=e=>{var t;return(null==(t=o.find(t=>t.types.includes(e)))?void 0:t.long_name)||""},m=i("locality")||i("administrative_area_level_2"),h=i("administrative_area_level_1"),x=i("postal_code");d(m),c(h),u(x);let j=null==(a=n.geometry)||null==(s=a.location)?void 0:s.lat(),v=null==(r=n.geometry)||null==(l=r.location)?void 0:l.lng();p((null==j?void 0:j.toString())||""),g((null==v?void 0:v.toString())||""),t(n)})},[l,t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{ref:s,type:"text",placeholder:"Enter a location",className:"form-control mb-2",onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()}}),(0,a.jsx)("input",{type:"hidden",name:"city",value:i}),(0,a.jsx)("input",{type:"hidden",name:"state",value:o}),(0,a.jsx)("input",{type:"hidden",name:"pincode",value:m}),(0,a.jsx)("input",{type:"hidden",name:"latitude",value:h}),(0,a.jsx)("input",{type:"hidden",name:"longitude",value:x})]})}var c=s(5666),i=s(883);function d(){let[e,t]=(0,n.useState)(null),[s,d]=(0,n.useState)(""),[m,u]=(0,n.useState)(""),[h,p]=(0,n.useState)([]),x=async t=>{var a;if(t.preventDefault(),!s)return void alert("Please select a category");if(!e||!(null==(a=e.geometry)?void 0:a.location))return void alert("Please select a valid location");let l=e.geometry.location.lat(),r=e.geometry.location.lng();try{let e=await fetch(i.$P,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:s,keyword:m,latitude:l,longitude:r})});if(!e.ok)throw Error("Server error: ".concat(e.statusText));let t=await e.json();console.log("Search results:",t),p(t.results||[])}catch(e){console.error("Error searching providers:",e),alert("Failed to perform search. Please try again.")}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.default,{}),(0,a.jsx)("section",{className:"banner-area",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"row banner-content",children:(0,a.jsxs)("div",{className:"col-lg-12 d-flex align-items-center justify-content-between",children:[(0,a.jsxs)("div",{className:"left-part",children:[(0,a.jsx)("h1",{children:"Search Providers"}),(0,a.jsx)("p",{children:"Feel free to search the service as per your desire. We will provide you the best."})]}),(0,a.jsxs)("div",{className:"right-part",children:[(0,a.jsx)("a",{href:"/",children:"home"}),(0,a.jsx)("span",{className:"fa fa-caret-right"}),(0,a.jsx)("a",{href:"/search",children:"Search Providers"})]})]})})})}),(0,a.jsxs)("section",{className:"",children:[(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-md-10 mx-auto",children:(0,a.jsx)("form",{onSubmit:x,children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"form-group col-md-4",children:[(0,a.jsx)("label",{children:"Enter Location"}),(0,a.jsx)(o,{onPlaceSelected:e=>{console.log(e),t(e)}})]}),(0,a.jsxs)("div",{className:"form-group col-md-3",children:[(0,a.jsx)("label",{children:"Select Category"}),(0,a.jsxs)("select",{name:"category",className:"form-control",value:s,onChange:e=>d(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select"}),(0,a.jsx)("option",{value:"Doctor",children:"Doctor"}),(0,a.jsx)("option",{value:"Pathology",children:"Pathology"})]})]}),(0,a.jsxs)("div",{className:"form-group col-md-3",children:[(0,a.jsx)("label",{children:"Enter Keywords"}),(0,a.jsx)("input",{type:"text",className:"form-control",value:m,onChange:e=>u(e.target.value)})]}),(0,a.jsx)("div",{className:"form-group col-md-2 d-flex align-items-end",children:(0,a.jsx)("button",{type:"submit",className:"btn btn-primary w-100",children:(0,a.jsx)("i",{className:"fa fa-search"})})})]})})})})}),(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"row mt-5",children:[0===h.length&&(0,a.jsx)("div",{className:"col-12 text-center text-muted",children:"No results found. Try searching!"}),h.map(e=>(0,a.jsx)("div",{className:"col-md-4 mb-4",children:(0,a.jsxs)("div",{className:"card h-100 shadow-sm",children:[(0,a.jsx)(l.default,{src:"/doctor.jpg",className:"card-img-top",alt:e.user_name,width:350,height:200,style:{objectFit:"cover"}}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("h5",{className:"card-title",children:e.user_name}),(0,a.jsxs)("p",{className:"card-text",children:[(0,a.jsx)("strong",{children:"Address:"})," ",e.address,(0,a.jsx)("br",{}),(0,a.jsx)("strong",{children:"Distance:"})," ",e.distance.toFixed(2)," km"]})]}),(0,a.jsx)("div",{className:"card-footer text-center",children:(0,a.jsx)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(e.latitude,",").concat(e.longitude),target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary btn-sm",children:"View on Map"})})]})},e.user_id))]})})]}),(0,a.jsx)(c.default,{})]})}},6041:(e,t,s)=>{Promise.resolve().then(s.bind(s,3299))}},e=>{var t=t=>e(e.s=t);e.O(0,[675,711,159,145,441,684,358],()=>t(6041)),_N_E=e.O()}]);