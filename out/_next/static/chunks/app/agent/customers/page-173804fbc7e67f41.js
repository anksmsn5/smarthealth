(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5466],{883:(e,s,t)=>{"use strict";t.d(s,{$P:()=>h,H:()=>p,TU:()=>n,aK:()=>l,eT:()=>c,ec:()=>u,ox:()=>i,pH:()=>o,q5:()=>m,vk:()=>d,vo:()=>r,w0:()=>b});let a="https://shreevasudev.in/smartApi/",r="https://smarthealthbackend.shreevasudev.in/uploads/logos/",l=a+"settings.php",n=a+"userregister.php",o=a+"userlogin.php",i=a+"packages.php",c=a+"purchase.php",d=a+"userorders.php",m=a+"userdashboard.php",u=a+"changepassword.php",h=a+"search.php",p=a+"agentscustomer.php",b=a+"deletecustomer.php"},3628:(e,s,t)=>{Promise.resolve().then(t.bind(t,9449))},9449:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var a=t(5155),r=t(2115),l=t(7124),n=t(5754),o=t(883),i=t(9981),c=t(4752),d=t.n(c);let m=()=>{let[e,s]=(0,r.useState)([]),[t,c]=(0,r.useState)([]),[m,u]=(0,r.useState)(!0),[h,p]=(0,r.useState)(null),[b,f]=(0,r.useState)(""),[w,g]=(0,r.useState)(!1),[x,j]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("id");e?p(Number(e)):(console.warn("No user_id found in localStorage"),u(!1))},[]),(0,r.useEffect)(()=>{h&&y(h)},[h]);let y=async e=>{u(!0);try{let t=await fetch(o.H,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e})}),a=await t.json();console.log("API response:",a);let r=Array.isArray(a.data)?a.data:[a.data];s(r),c(r)}catch(e){console.error("Error loading data:",e)}finally{u(!1)}};(0,r.useEffect)(()=>{c(e.filter(e=>{var s;return null==(s=e.name)?void 0:s.toLowerCase().includes(b.toLowerCase())}))},[b,e]);let N=e=>{j(e),g(!0)},v=async e=>{if((await d().fire({title:"Are you sure?",text:"This action will delete the user permanently!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{let s=await fetch(o.w0,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:e})}),t=await s.json();t.status?(d().fire("Deleted!",t.message,"success"),h&&y(h)):d().fire("Error!",t.message,"error")}catch(e){d().fire("Error!","Something went wrong.","error")}},C=[{name:"S.No.",cell:(e,s)=>s+1,width:"80px"},{name:"Customer Name",selector:e=>e.name,sortable:!0},{name:"Email",selector:e=>e.email,sortable:!0},{name:"Mobile",selector:e=>e.mobile,sortable:!0},{name:"Actions",cell:e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>N(e),children:"Edit"}),(0,a.jsx)("button",{className:"btn btn-sm btn-danger ml-5",onClick:()=>v(e.id),children:"Delete"})]}),ignoreRowClick:!0,allowOverflow:!0,button:!0,width:"160px"}];return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-light",children:[(0,a.jsx)("div",{className:"container flex-grow h-100",children:(0,a.jsx)("div",{className:"row banner-content",children:(0,a.jsx)("div",{className:"col-lg-12",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-md-12",children:(0,a.jsxs)("div",{className:"card p-4 shadow mt-3 mb-3",style:{width:"100%"},children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,a.jsx)("h4",{className:"text-xl font-bold m-0",children:"Customers"}),(0,a.jsx)("button",{className:"btn btn-primary",onClick:()=>{j(null),g(!0)},children:"Add Customer"})]}),(0,a.jsx)(l.Ay,{columns:C,data:t,progressPending:m,pagination:!0,responsive:!0,subHeader:!0,subHeaderComponent:(0,a.jsx)("div",{className:"d-flex w-100",children:(0,a.jsx)("input",{type:"text",className:"form-control me-auto",style:{width:"30%"},placeholder:"Search",value:b,onChange:e=>f(e.target.value)})})})]})})})})})}),(0,a.jsxs)(n.A,{show:w,onHide:()=>g(!1),centered:!0,children:[(0,a.jsx)(n.A.Header,{closeButton:!0,children:(0,a.jsx)(n.A.Title,{children:x?"Edit Customer":"Add Customer"})}),(0,a.jsx)(n.A.Body,{children:(0,a.jsx)(i.A,{onClose:()=>{g(!1),h&&y(h)},onSuccess:()=>{g(!1),h&&y(h)},type:7,referredby:h||"",customerData:x})})]})]})}},9981:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var a=t(5155),r=t(2115),l=t(3568),n=t(883);let o=e=>{let{referredby:s,type:t,onClose:o,customerData:i}=e,[c,d]=(0,r.useState)({id:"",name:"",email:"",mobile:"",password:"",confirm_password:""}),[m,u]=(0,r.useState)({}),[h,p]=(0,r.useState)(!1),[b,f]=(0,r.useState)(null),[w,g]=(0,r.useState)(null);(0,r.useEffect)(()=>{i&&d({id:i.id||"",name:i.name||"",email:i.email||"",mobile:i.mobile||"",password:"",confirm_password:""})},[i]);let x=e=>{let{name:s,value:t}=e.target;d(e=>({...e,[s]:t})),u(e=>({...e,[s]:""}))},j=()=>{let e={};c.name.trim()||(e.name="Name is required."),c.email.includes("@")||(e.email="Invalid email."),c.mobile.match(/^\d{10}$/)||(e.mobile="Mobile must be 10 digits.");let s=!!(null==i?void 0:i.id),t=c.password.trim().length>0||c.confirm_password.trim().length>0;return(!s||t)&&(c.password.length<6&&(e.password="Password must be at least 6 characters."),c.password!==c.confirm_password&&(e.confirm_password="Passwords do not match.")),u(e),0===Object.keys(e).length},y=async e=>{if(e.preventDefault(),f(null),g(null),j()){p(!0);try{let e={...c,type:t};s&&!isNaN(Number(s))&&(e.referredby=Number(s));let a=await fetch(n.TU,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await a.json();if(!a.ok)return void l.Ay.error((null==r?void 0:r.message)||"Something went wrong.");l.Ay.success("Registration successful!"),d({id:"",name:"",email:"",mobile:"",password:"",confirm_password:""}),o&&o()}catch(e){g("Network error. Please try again.")}finally{p(!1)}}};return(0,a.jsx)("form",{onSubmit:y,children:(0,a.jsxs)("div",{className:"row",children:[!o&&(0,a.jsx)("div",{className:"col-md-12 form-group",children:(0,a.jsxs)("h3",{children:["Create ",3===t?"Agent":7===t?"Customer":"User"," Account"]})}),Object.keys(c).map(e=>"id"===e?null:(0,a.jsxs)("div",{className:"col-md-12 form-group",children:[(0,a.jsx)("label",{children:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,a.jsx)("input",{type:e.includes("password")?"password":"text",name:e,className:"form-control",value:c[e],onChange:x}),m[e]&&(0,a.jsx)("small",{className:"text-danger",children:m[e]})]},e)),w&&(0,a.jsx)("div",{className:"col-md-12 form-group text-danger",children:w}),b&&(0,a.jsx)("div",{className:"col-md-12 form-group text-success",children:b}),(0,a.jsxs)("div",{className:"col-md-12 form-group",children:[(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?"Creating Account...":"Create Account"}),o&&(0,a.jsx)("button",{type:"button",className:"btn btn-secondary ml-5",onClick:o,children:"Close"})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[8320,3568,7124,5754,8441,1684,7358],()=>s(3628)),_N_E=e.O()}]);