(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[466],{6952:(e,t,s)=>{Promise.resolve().then(s.bind(s,9449))},9449:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(5155),n=s(2115),l=s(7124),r=s(5754),o=s(883),i=s(5028),c=s(4752),d=s.n(c),m=s(143),u=s(9911),h=s(7820);let x=(0,i.default)(()=>Promise.resolve().then(s.bind(s,9981)),{loadableGenerated:{webpack:()=>[9981]},ssr:!1}),b=()=>{let[e,t]=(0,n.useState)([]),[s,i]=(0,n.useState)([]),[c,b]=(0,n.useState)(!0),[j,f]=(0,n.useState)(null),[g,w]=(0,n.useState)(""),[y,p]=(0,n.useState)(!1),[C,N]=(0,n.useState)(null),[v,S]=(0,n.useState)(!1),[A,k]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=localStorage.getItem("id");e?f(Number(e)):(console.warn("No user_id found in localStorage"),b(!1))},[]),(0,n.useEffect)(()=>{j&&E(j)},[j]);let E=async e=>{b(!0);try{let s=await fetch(o.H,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e})}),a=await s.json(),n=Array.isArray(a.data)?a.data:[a.data];t(n),i(n)}catch(e){console.error("Error loading data:",e)}finally{b(!1)}};(0,n.useEffect)(()=>{i(e.filter(e=>{var t;return null==(t=e.name)?void 0:t.toLowerCase().includes(g.toLowerCase())}))},[g,e]);let _=e=>{N(e),p(!0)},T=e=>{k(e),S(!0)},B=async e=>{if((await d().fire({title:"Are you sure?",text:"This action will delete the user permanently!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{let t=await fetch(o.w0,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:e})}),s=await t.json();s.status?(d().fire("Deleted!",s.message,"success"),j&&E(j)):d().fire("Error!",s.message,"error")}catch(e){d().fire("Error!","Something went wrong.","error")}},H=[{name:"S.No.",cell:(e,t)=>t+1,width:"80px"},{name:"Customer Name",selector:e=>e.name,sortable:!0},{name:"Email",selector:e=>e.email,sortable:!0},{name:"Mobile",selector:e=>e.mobile,sortable:!0},{name:"Address",selector:e=>e.address,sortable:!0},{name:"State",selector:e=>e.state,sortable:!0},{name:"City",selector:e=>e.city,sortable:!0},{name:"Actions",cell:e=>(0,a.jsxs)(a.Fragment,{children:[e.package_name?(0,a.jsx)("span",{className:"badge bg-success text-white me-2 mr-2",children:e.package_name}):(0,a.jsx)("button",{title:"Assign Package",className:"btn btn-sm btn-primary me-2 mr-1",onClick:()=>T(e),children:(0,a.jsx)(u.rrY,{})}),(0,a.jsx)("button",{title:"Edit Customer",className:"btn btn-sm btn-warning me-2",onClick:()=>_(e),children:(0,a.jsx)(u.F7,{})}),(0,a.jsx)("button",{title:"Delete Customer",className:"btn btn-sm btn-danger ml-5",onClick:()=>B(e.id),children:(0,a.jsx)(u.qbC,{})})]}),ignoreRowClick:!0,allowOverflow:!0,button:!0,width:"160px"}];return!j&&c?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.default,{}),(0,a.jsxs)(r.A,{show:v,onHide:()=>S(!1),centered:!0,className:"custom-modal-width",children:[(0,a.jsx)(r.A.Header,{closeButton:!0,children:A&&(0,a.jsxs)(r.A.Title,{children:["Assign Package To - ",(0,a.jsx)("strong",{children:A.name})]})}),(0,a.jsx)(r.A.Body,{children:A&&(0,a.jsx)(h.default,{agent_id:j||void 0,customer_id:A.id})})]}),(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-light",children:[(0,a.jsx)("div",{className:"container-fluid flex-grow h-100",children:(0,a.jsx)("div",{className:"row banner-content",children:(0,a.jsx)("div",{className:"col-lg-12",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-md-12",children:(0,a.jsxs)("div",{className:"card p-4 shadow mt-3 mb-3",style:{width:"100%"},children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,a.jsx)("h4",{className:"text-xl font-bold m-0",children:"Customers"}),(0,a.jsx)("button",{className:"btn btn-primary",onClick:()=>{j&&(N(null),p(!0))},children:"Add Customer"})]}),(0,a.jsx)(l.Ay,{columns:H,data:s,progressPending:c,pagination:!0,responsive:!0,subHeader:!0,subHeaderComponent:(0,a.jsx)("div",{className:"d-flex w-100",children:(0,a.jsx)("input",{type:"text",className:"form-control me-auto",style:{width:"30%"},placeholder:"Search",value:g,onChange:e=>w(e.target.value)})})})]})})})})})}),(0,a.jsxs)(r.A,{show:y,onHide:()=>p(!1),centered:!0,children:[(0,a.jsx)(r.A.Header,{closeButton:!0,children:(0,a.jsx)(r.A.Title,{children:C?"Edit Customer":"Add Customer"})}),(0,a.jsx)(r.A.Body,{children:j&&(0,a.jsx)(x,{onClose:()=>{p(!1),E(j)},onSuccess:()=>{p(!1),E(j)},type:7,referredby:j,customerData:C})})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[675,711,320,159,568,124,444,143,820,441,684,358],()=>t(6952)),_N_E=e.O()}]);