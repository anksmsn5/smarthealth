(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7545],{2785:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var t=a(5155),l=a(2115),c=a(9911),n=a(883);function r(e){let{title:s}=e,[a,r]=(0,l.useState)(""),[d,i]=(0,l.useState)(""),[o,m]=(0,l.useState)(""),[h,x]=(0,l.useState)("");return(0,l.useEffect)(()=>{let e=localStorage.getItem("package_name");e&&r(e)},[]),(0,l.useEffect)(()=>{(async()=>{let e=localStorage.getItem("package_id"),s=localStorage.getItem("id");if(e)try{let a=await fetch(n.$Q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({package_id:e,user_id:s})});if(!a.ok)throw Error("Failed to fetch package details");let t=await a.json();i(t.labtestvalue),m(t.appointment),x(t.pharmacy)}catch(e){console.error("Error fetching package details:",e),r("")}})()},[]),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-3 gap-2",children:[(0,t.jsx)("h4",{className:"fw-bold m-0",children:s}),a&&"undefined"!==a?(0,t.jsxs)("span",{className:"badge bg-primary text-white px-3 py-2",children:["Currently Active Package: ",a]}):(0,t.jsx)("span",{className:"badge bg-danger text-white px-3 py-2",children:"No Active Package"})]}),(0,t.jsxs)("div",{className:"d-flex flex-column flex-md-row justify-content-center align-items-stretch align-items-md-center gap-3",children:[(0,t.jsxs)("div",{className:"rounded px-3 py-2 text-white bg-primary d-flex align-items-center gap-2 m-2",children:[(0,t.jsx)(c.XcJ,{size:16,className:"mr-1"}),(0,t.jsxs)("span",{className:"fw-semibold",children:["Lab Credit : â‚¹",null!=d?d:0]})]}),(0,t.jsxs)("div",{className:"rounded px-3 py-2 text-white bg-success d-flex align-items-center gap-2 m-2",children:[(0,t.jsx)(c.gUT,{size:16,className:"mr-1"}),(0,t.jsxs)("span",{className:"fw-semibold",children:["Appointment Credits : ",o]})]}),(0,t.jsxs)("div",{className:"rounded px-3 py-2 text-white bg-danger d-flex align-items-center gap-2 m-2",children:[(0,t.jsx)(c.I1M,{size:16,className:"mr-1"}),(0,t.jsxs)("span",{className:"fw-semibold",children:["Medicines Credits : ",h]})]})]})]})}},7067:(e,s,a)=>{Promise.resolve().then(a.bind(a,7463))},7463:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>w});var t=a(5155),l=a(2115),c=a(5695),n=a(883),r=a(143),d=a(4752),i=a.n(d),o=a(4040),m=a(9300),h=a.n(m),x=a(7390);let j=l.forwardRef((e,s)=>{let{bsPrefix:a,variant:l,animation:c="border",size:n,as:r="div",className:d,...i}=e;a=(0,x.oU)(a,"spinner");let o="".concat(a,"-").concat(c);return(0,t.jsx)(r,{ref:s,...i,className:h()(d,o,n&&"".concat(o,"-").concat(n),l&&"text-".concat(l))})});j.displayName="Spinner";var b=a(9911);let p=e=>{let{show:s,onHide:a,doctor:l}=e;return(0,t.jsxs)(o.A,{show:s,onHide:a,centered:!0,dialogClassName:"modal-xl doctor-modal",backdropClassName:"custom-backdrop",children:[(0,t.jsx)(o.A.Header,{className:"bg-secondary text-white",closeButton:!0,children:(0,t.jsx)(o.A.Title,{children:"Doctor Profile"})}),(0,t.jsxs)(o.A.Body,{children:[(0,t.jsxs)("h5",{children:[(0,t.jsx)(b.REg,{className:"me-2"})," ",l.name]}),(0,t.jsxs)("p",{children:[(0,t.jsx)(b.maD,{className:"me-2"})," ",l.email]}),(0,t.jsxs)("p",{children:[(0,t.jsx)(b.Cab,{className:"me-2"})," ",l.mobile]}),(0,t.jsxs)("p",{children:[(0,t.jsx)(b._mT,{className:"me-2"})," ",l.address,", ",l.city,", ",l.state]}),(0,t.jsxs)("p",{children:["Distance: ",l.distance.toFixed(2)," km away"]})]})]})},N=e=>{let{show:s,onHide:a,doctor:l}=e;return(0,t.jsxs)(o.A,{show:s,onHide:a,centered:!0,dialogClassName:"modal-xl doctor-modal",backdropClassName:"",children:[(0,t.jsx)(o.A.Header,{className:"bg-success text-white",closeButton:!0,children:(0,t.jsxs)(o.A.Title,{children:["Book Appointment with ",l.name]})}),(0,t.jsx)(o.A.Body,{children:(0,t.jsxs)("form",{children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Appointment Date"}),(0,t.jsx)("input",{type:"date",className:"form-control"})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Message"}),(0,t.jsx)("textarea",{className:"form-control",rows:3})]}),(0,t.jsx)("button",{type:"submit",className:"btn btn-success",children:"Book Appointment"})]})})]})},u=e=>{let{show:s,onHide:a,user_id:c}=e,[r,d]=(0,l.useState)([]),[i,m]=(0,l.useState)(!1),[h,x]=(0,l.useState)(""),[u,g]=(0,l.useState)(null),[f,w]=(0,l.useState)(!1),[y,v]=(0,l.useState)(!1);(0,l.useEffect)(()=>{s&&k()},[s]);let k=async()=>{m(!0),x("");try{let e=await fetch(n.qK,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:c})}),s=await e.json();s.status&&s.data?d(s.data):x(s.message||"Unable to fetch doctors.")}catch(e){console.error(e),x("Something went wrong while fetching doctors.")}finally{m(!1)}},S=e=>{g(e),w(!0)},A=e=>{g(e),v(!0)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.A,{show:s,onHide:a,centered:!0,dialogClassName:"modal-lg",children:[(0,t.jsx)(o.A.Header,{className:"bg-primary text-white",closeButton:!0,children:(0,t.jsx)(o.A.Title,{className:"text-white",children:"Book Appointment"})}),(0,t.jsx)(o.A.Body,{children:i?(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(j,{animation:"border"}),(0,t.jsx)("p",{children:"Loading nearby doctors..."})]}):h?(0,t.jsx)("div",{className:"text-danger text-center",children:h}):r.length>0?(0,t.jsx)("div",{className:"row",children:r.map(e=>(0,t.jsx)("div",{className:"col-md-6 mb-4",children:(0,t.jsxs)("div",{className:"card h-100 shadow-sm",children:[(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("h5",{className:"card-title",children:[(0,t.jsx)(b.REg,{className:"me-2"})," ",e.name]}),(0,t.jsxs)("p",{className:"card-text mb-1",children:[(0,t.jsx)(b.maD,{className:"me-2"})," ",e.email]}),(0,t.jsxs)("p",{className:"card-text mb-1",children:[(0,t.jsx)(b.Cab,{className:"me-2"})," ",e.mobile]}),(0,t.jsxs)("p",{className:"card-text",children:[(0,t.jsx)(b._mT,{className:"me-2"})," ",e.address,", ",e.city,", ",e.state]})]}),(0,t.jsxs)("div",{className:"card-footer bg-white",children:[(0,t.jsxs)("div",{className:"row g-2",children:[(0,t.jsx)("div",{className:"col-6",children:(0,t.jsxs)("button",{className:"btn btn-sm btn-primary w-100",children:[(0,t.jsx)(b.meu,{className:"me-2"}),e.distance.toFixed(2)," km away"]})}),(0,t.jsx)("div",{className:"col-6",children:(0,t.jsxs)("button",{className:"btn btn-sm btn-secondary w-100",onClick:()=>window.open("https://www.google.com/maps/search/?api=1&query=".concat(e.latitude,",").concat(e.longitude),"_blank"),children:[(0,t.jsx)(b._mT,{className:"me-1"}),"Locate on Map"]})})]}),(0,t.jsxs)("div",{className:"row g-2 mt-2",children:[(0,t.jsx)("div",{className:"col-6",children:(0,t.jsxs)("button",{className:"btn btn-sm btn-success w-100",onClick:()=>S(e),children:[(0,t.jsx)(b.__w,{className:"me-1"}),"View Profile"]})}),(0,t.jsx)("div",{className:"col-6",children:(0,t.jsxs)("button",{className:"btn btn-sm btn-warning w-100",onClick:()=>A(e),children:[(0,t.jsx)(b.gUT,{className:"me-1"}),"Book Now"]})})]})]})]})},e.id))}):(0,t.jsx)("div",{className:"text-center",children:"No nearby doctors found."})})]}),u&&(0,t.jsx)(p,{show:f,onHide:()=>w(!1),doctor:u}),u&&(0,t.jsx)(N,{show:y,onHide:()=>v(!1),doctor:u})]})},g=e=>{let{show:s,onHide:a}=e;return(0,t.jsxs)(o.A,{show:s,onHide:a,children:[(0,t.jsx)(o.A.Header,{closeButton:!0,children:(0,t.jsx)(o.A.Title,{children:"Book Appointment"})}),(0,t.jsx)(o.A.Body,{})]})};var f=a(2785);function w(){let e=(0,c.useRouter)(),[s,a]=(0,l.useState)(null),[d,o]=(0,l.useState)(null),[m,h]=(0,l.useState)(null),[x,j]=(0,l.useState)(null),[p,N]=(0,l.useState)([]),[w,y]=(0,l.useState)([]),[v,k]=(0,l.useState)(!1),[S,A]=(0,l.useState)(!1),[_,C]=(0,l.useState)(null),[T,B]=(0,l.useState)({name:"",email:"",mobile:""}),[E,H]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("id");if(C(e),!e){console.error("No userId found in localStorage."),H(!1);return}let s=await fetch(n.q5,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e})});if(!s.ok)throw Error("Failed to fetch dashboard data");let t=await s.json();a(t.data.total_orders||0),o(t.data.package),h(t.data.total_appointments),j(t.data.total_labtests),N(t.data.latest_appointments),y(t.data.latest_labtests)}catch(e){console.error("Error fetching dashboard data:",e)}finally{H(!1)}})()},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.default,{}),(0,t.jsx)("div",{className:"min-vh-100 d-flex flex-column bg-light py-4",children:(0,t.jsxs)("div",{className:"container flex-grow-1",children:[(0,t.jsx)(f.A,{title:"Dashboard"}),E?(0,t.jsx)("p",{children:"Loading..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"container my-4",children:[(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-md-12 mb-4",children:(0,t.jsx)("b",{className:"text-black",children:"How we can help you today?"})})}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-md-4 mb-4",children:(0,t.jsx)("div",{className:"text-decoration-none text-dark",style:{cursor:"pointer"},onClick:()=>{let s=localStorage.getItem("package_name");s&&"null"!==s&&"undefined"!==s?e.push("/userpanel/order-test"):i().fire({icon:"error",title:"No Active Package",text:"You must purchase a package before booking a Lab test."})},children:(0,t.jsxs)("div",{className:"border rounded p-4 text-center shadow-sm h-100",style:{backgroundColor:"#e0f7fa"},children:[(0,t.jsx)(b.lcw,{size:40,className:"mb-3 text-black"}),(0,t.jsx)("h5",{children:"Lab Tests"})]})})}),(0,t.jsx)("div",{className:"col-md-4 mb-4",children:(0,t.jsx)("a",{href:"#",className:"text-decoration-none text-dark",children:(0,t.jsxs)("div",{className:"border rounded p-4 text-center shadow-sm h-100",style:{backgroundColor:"#e8f5e9"},children:[(0,t.jsx)(b.ifA,{size:40,className:"mb-3 text-black"}),(0,t.jsx)("h5",{children:"Doctor Appointment"})]})})}),(0,t.jsx)("div",{className:"col-md-4 mb-4",children:(0,t.jsx)("a",{href:"#",className:"text-decoration-none text-dark",children:(0,t.jsxs)("div",{className:"border rounded p-4 text-center shadow-sm h-100",style:{backgroundColor:"#fff9c4"},children:[(0,t.jsx)(b.I1M,{size:40,className:"mb-3 text-black"}),(0,t.jsx)("h5",{children:"Medicines"})]})})})]})]}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-md-6 mb-4",children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header bg-primary text-white",children:"Your Appointments"}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("table",{className:"table table-striped",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"ID"}),(0,t.jsx)("th",{children:"Date"}),(0,t.jsx)("th",{children:"Doctor"}),(0,t.jsx)("th",{children:"Status"})]})}),(0,t.jsx)("tbody",{children:p.length>0?p.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.id}),(0,t.jsx)("td",{children:e.appointment_date}),(0,t.jsx)("td",{children:e.doctor_name}),(0,t.jsx)("td",{children:e.status})]},e.id)):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"text-center",children:"No appointments found"})})})]}),(0,t.jsx)("button",{type:"button",className:"btn btn-primary",children:"View All"})]})]})}),(0,t.jsx)("div",{className:"col-md-6 mb-4",children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header bg-primary text-white",children:"Lab Reports"}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("table",{className:"table table-striped",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"ID"}),(0,t.jsx)("th",{children:"Patient Name"}),(0,t.jsx)("th",{children:"Age"}),(0,t.jsx)("th",{children:"Status"})]})}),(0,t.jsx)("tbody",{children:w.length>0?w.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:s+1}),(0,t.jsx)("td",{children:e.patient_name}),(0,t.jsx)("td",{children:e.age}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge text-white ".concat("booked"===e.status.toLowerCase()?"bg-danger":"bg-success"),children:e.status})})]},s)):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"text-center",children:"No lab tests found"})})})]}),(0,t.jsx)("a",{href:"/userpanel/test-orders",className:"btn btn-primary",children:"View All"})]})]})})]})]})]})}),v&&(0,t.jsx)(u,{show:v,onHide:()=>k(!1),user_id:_?parseInt(_):0}),S&&(0,t.jsx)(g,{show:S,onHide:()=>A(!1)})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[9675,6711,8320,5180,4040,143,8441,1684,7358],()=>s(7067)),_N_E=e.O()}]);