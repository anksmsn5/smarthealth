(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7545],{7067:(e,s,t)=>{Promise.resolve().then(t.bind(t,7463))},7463:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var a=t(5155),l=t(2115),n=t(883),c=t(143),d=t(4752),r=t.n(d),i=t(4040),o=t(9300),m=t.n(o),h=t(7390);let x=l.forwardRef((e,s)=>{let{bsPrefix:t,variant:l,animation:n="border",size:c,as:d="div",className:r,...i}=e;t=(0,h.oU)(t,"spinner");let o="".concat(t,"-").concat(n);return(0,a.jsx)(d,{ref:s,...i,className:m()(r,o,c&&"".concat(o,"-").concat(c),l&&"text-".concat(l))})});x.displayName="Spinner";var j=t(9911);let b=e=>{let{show:s,onHide:t,doctor:l}=e;return(0,a.jsxs)(i.A,{show:s,onHide:t,centered:!0,dialogClassName:"modal-xl doctor-modal",backdropClassName:"custom-backdrop",children:[(0,a.jsx)(i.A.Header,{className:"bg-secondary text-white",closeButton:!0,children:(0,a.jsx)(i.A.Title,{children:"Doctor Profile"})}),(0,a.jsxs)(i.A.Body,{children:[(0,a.jsxs)("h5",{children:[(0,a.jsx)(j.REg,{className:"me-2"})," ",l.name]}),(0,a.jsxs)("p",{children:[(0,a.jsx)(j.maD,{className:"me-2"})," ",l.email]}),(0,a.jsxs)("p",{children:[(0,a.jsx)(j.Cab,{className:"me-2"})," ",l.mobile]}),(0,a.jsxs)("p",{children:[(0,a.jsx)(j._mT,{className:"me-2"})," ",l.address,", ",l.city,", ",l.state]}),(0,a.jsxs)("p",{children:["Distance: ",l.distance.toFixed(2)," km away"]})]})]})},u=e=>{let{show:s,onHide:t,doctor:l}=e;return(0,a.jsxs)(i.A,{show:s,onHide:t,centered:!0,dialogClassName:"modal-xl doctor-modal",backdropClassName:"",children:[(0,a.jsx)(i.A.Header,{className:"bg-success text-white",closeButton:!0,children:(0,a.jsxs)(i.A.Title,{children:["Book Appointment with ",l.name]})}),(0,a.jsx)(i.A.Body,{children:(0,a.jsxs)("form",{children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"Appointment Date"}),(0,a.jsx)("input",{type:"date",className:"form-control"})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"Message"}),(0,a.jsx)("textarea",{className:"form-control",rows:3})]}),(0,a.jsx)("button",{type:"submit",className:"btn btn-success",children:"Book Appointment"})]})})]})},N=e=>{let{show:s,onHide:t,user_id:c}=e,[d,r]=(0,l.useState)([]),[o,m]=(0,l.useState)(!1),[h,N]=(0,l.useState)(""),[p,w]=(0,l.useState)(null),[g,y]=(0,l.useState)(!1),[f,v]=(0,l.useState)(!1);(0,l.useEffect)(()=>{s&&k()},[s]);let k=async()=>{m(!0),N("");try{let e=await fetch(n.qK,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:c})}),s=await e.json();s.status&&s.data?r(s.data):N(s.message||"Unable to fetch doctors.")}catch(e){console.error(e),N("Something went wrong while fetching doctors.")}finally{m(!1)}},A=e=>{w(e),y(!0)},S=e=>{w(e),v(!0)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.A,{show:s,onHide:t,centered:!0,dialogClassName:"modal-lg",children:[(0,a.jsx)(i.A.Header,{className:"bg-primary text-white",closeButton:!0,children:(0,a.jsx)(i.A.Title,{className:"text-white",children:"Book Appointment"})}),(0,a.jsx)(i.A.Body,{children:o?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(x,{animation:"border"}),(0,a.jsx)("p",{children:"Loading nearby doctors..."})]}):h?(0,a.jsx)("div",{className:"text-danger text-center",children:h}):d.length>0?(0,a.jsx)("div",{className:"row",children:d.map(e=>(0,a.jsx)("div",{className:"col-md-6 mb-4",children:(0,a.jsxs)("div",{className:"card h-100 shadow-sm",children:[(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("h5",{className:"card-title",children:[(0,a.jsx)(j.REg,{className:"me-2"})," ",e.name]}),(0,a.jsxs)("p",{className:"card-text mb-1",children:[(0,a.jsx)(j.maD,{className:"me-2"})," ",e.email]}),(0,a.jsxs)("p",{className:"card-text mb-1",children:[(0,a.jsx)(j.Cab,{className:"me-2"})," ",e.mobile]}),(0,a.jsxs)("p",{className:"card-text",children:[(0,a.jsx)(j._mT,{className:"me-2"})," ",e.address,", ",e.city,", ",e.state]})]}),(0,a.jsxs)("div",{className:"card-footer bg-white",children:[(0,a.jsxs)("div",{className:"row g-2",children:[(0,a.jsx)("div",{className:"col-6",children:(0,a.jsxs)("button",{className:"btn btn-sm btn-primary w-100",children:[(0,a.jsx)(j.meu,{className:"me-2"}),e.distance.toFixed(2)," km away"]})}),(0,a.jsx)("div",{className:"col-6",children:(0,a.jsxs)("button",{className:"btn btn-sm btn-secondary w-100",onClick:()=>window.open("https://www.google.com/maps/search/?api=1&query=".concat(e.latitude,",").concat(e.longitude),"_blank"),children:[(0,a.jsx)(j._mT,{className:"me-1"}),"Locate on Map"]})})]}),(0,a.jsxs)("div",{className:"row g-2 mt-2",children:[(0,a.jsx)("div",{className:"col-6",children:(0,a.jsxs)("button",{className:"btn btn-sm btn-success w-100",onClick:()=>A(e),children:[(0,a.jsx)(j.__w,{className:"me-1"}),"View Profile"]})}),(0,a.jsx)("div",{className:"col-6",children:(0,a.jsxs)("button",{className:"btn btn-sm btn-warning w-100",onClick:()=>S(e),children:[(0,a.jsx)(j.gUT,{className:"me-1"}),"Book Now"]})})]})]})]})},e.id))}):(0,a.jsx)("div",{className:"text-center",children:"No nearby doctors found."})})]}),p&&(0,a.jsx)(b,{show:g,onHide:()=>y(!1),doctor:p}),p&&(0,a.jsx)(u,{show:f,onHide:()=>v(!1),doctor:p})]})},p=e=>{let{show:s,onHide:t}=e;return(0,a.jsxs)(i.A,{show:s,onHide:t,children:[(0,a.jsx)(i.A.Header,{closeButton:!0,children:(0,a.jsx)(i.A.Title,{children:"Book Appointment"})}),(0,a.jsx)(i.A.Body,{})]})};function w(){let[e,s]=(0,l.useState)(null),[t,d]=(0,l.useState)(null),[i,o]=(0,l.useState)(null),[m,h]=(0,l.useState)(null),[x,j]=(0,l.useState)([]),[b,u]=(0,l.useState)([]),[w,g]=(0,l.useState)(!1),[y,f]=(0,l.useState)(!1),[v,k]=(0,l.useState)(null),[A,S]=(0,l.useState)({name:"",email:"",mobile:""}),[_,C]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("id");if(k(e),!e){console.error("No userId found in localStorage."),C(!1);return}let t=await fetch(n.q5,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e})});if(!t.ok)throw Error("Failed to fetch dashboard data");let a=await t.json();s(a.data.total_orders||0),d(a.data.package),o(a.data.total_appointments),h(a.data.total_labtests),j(a.data.latest_appointments),u(a.data.latest_labtests)}catch(e){console.error("Error fetching dashboard data:",e)}finally{C(!1)}})()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.default,{}),(0,a.jsx)("div",{className:"min-vh-100 d-flex flex-column bg-light py-4",children:(0,a.jsxs)("div",{className:"container flex-grow-1",children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,a.jsx)("h4",{className:"fw-bold mb-0",children:"Dashboard"}),null!==e&&e>=1?(0,a.jsxs)("span",{className:"badge bg-primary text-white px-3 py-2",children:["Currently Active Package: ",t]}):(0,a.jsx)("span",{className:"badge bg-danger text-white px-3 py-2",children:"No Active Package"})]}),_?(0,a.jsx)("p",{children:"Loading..."}):(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-md-6 mb-4",children:(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header bg-primary text-white",children:"Your Appointments"}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-primary",children:"View All"}),(0,a.jsx)("button",{type:"button",className:"btn btn-success",onClick:()=>{(null!=e?e:0)>=1?g(!0):r().fire({icon:"error",title:"No Active Package",text:"You must purchase a package before booking an appointment."})},children:"Book Appointment"})]}),(0,a.jsxs)("table",{className:"table table-striped",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"ID"}),(0,a.jsx)("th",{children:"Date"}),(0,a.jsx)("th",{children:"Doctor"}),(0,a.jsx)("th",{children:"Status"})]})}),(0,a.jsx)("tbody",{children:x.length>0?x.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.id}),(0,a.jsx)("td",{children:e.appointment_date}),(0,a.jsx)("td",{children:e.doctor_name}),(0,a.jsx)("td",{children:e.status})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"text-center",children:"No appointments found"})})})]})]})]})}),(0,a.jsx)("div",{className:"col-md-6 mb-4",children:(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header bg-primary text-white",children:"Lab Reports"}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-primary",children:"View All"}),(0,a.jsx)("button",{type:"button",className:"btn btn-success",onClick:()=>{(null!=e?e:0)>=1?f(!0):r().fire({icon:"error",title:"No Active Package",text:"You must purchase a package before booking a Lab test."})},children:"Book Lab Test"})]}),(0,a.jsxs)("table",{className:"table table-striped",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"ID"}),(0,a.jsx)("th",{children:"Test Name"}),(0,a.jsx)("th",{children:"Test Date"}),(0,a.jsx)("th",{children:"Status"})]})}),(0,a.jsx)("tbody",{children:b.length>0?b.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.id}),(0,a.jsx)("td",{children:e.test_name}),(0,a.jsx)("td",{children:e.test_date}),(0,a.jsx)("td",{children:e.status})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"text-center",children:"No lab tests found"})})})]})]})]})})]})]})}),w&&(0,a.jsx)(N,{show:w,onHide:()=>g(!1),user_id:v?parseInt(v):0}),y&&(0,a.jsx)(p,{show:y,onHide:()=>f(!1)})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[9675,6711,8320,5180,4040,143,8441,1684,7358],()=>s(7067)),_N_E=e.O()}]);